

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Contributing &mdash; HistomicsTK  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=9edc463e" />

  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=fd6eb6e6"></script>
      <script src="_static/sphinx_highlight.js?v=6ffebe34"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Credits" href="authors.html" />
    <link rel="prev" title="Analyzing remotely hosted images with the girder client" href="examples/workflows.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            HistomicsTK
              <img src="_static/histomicstk_mark.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-docs.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#types-of-contributions">Types of Contributions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#report-bugs">Report Bugs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fix-bugs">Fix Bugs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#implement-features">Implement Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#write-documentation">Write Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#submit-feedback">Submit Feedback</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#get-started">Get Started!</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pull-request-guidelines">Pull Request Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="#unit-testing-notes">Unit Testing Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#travis-integration-notes">Travis Integration Notes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Credits</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">HistomicsTK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Contributing</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/contributing.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="contributing">
<h1>Contributing<a class="headerlink" href="#contributing" title="Link to this heading">¶</a></h1>
<p>Contributions are welcome, and they are greatly appreciated! Every
little bit helps, and credit will always be given.</p>
<p>You can contribute in many ways:</p>
<section id="types-of-contributions">
<h2>Types of Contributions<a class="headerlink" href="#types-of-contributions" title="Link to this heading">¶</a></h2>
<section id="report-bugs">
<h3>Report Bugs<a class="headerlink" href="#report-bugs" title="Link to this heading">¶</a></h3>
<p>Report bugs at <a class="reference external" href="https://github.com/DigitalSlideArchive/HistomicsTK/issues">https://github.com/DigitalSlideArchive/HistomicsTK/issues</a>.</p>
<p>If you are reporting a bug, please include:</p>
<ul class="simple">
<li><p>Your operating system name and version.</p></li>
<li><p>Any details about your local setup that might be helpful in troubleshooting.</p></li>
<li><p>Detailed steps to reproduce the bug.</p></li>
</ul>
</section>
<section id="fix-bugs">
<h3>Fix Bugs<a class="headerlink" href="#fix-bugs" title="Link to this heading">¶</a></h3>
<p>Look through the GitHub issues for bugs. Anything tagged with “bug”
is open to whoever wants to implement it.</p>
</section>
<section id="implement-features">
<h3>Implement Features<a class="headerlink" href="#implement-features" title="Link to this heading">¶</a></h3>
<p>Look through the GitHub issues for features. Anything tagged with “enhancement”
is open to whoever wants to implement it.</p>
</section>
<section id="write-documentation">
<h3>Write Documentation<a class="headerlink" href="#write-documentation" title="Link to this heading">¶</a></h3>
<p>HistomicsTK could always use more documentation, whether as part of the
official HistomicsTK docs, in docstrings, or even on the web in blog posts,
articles, and such.</p>
</section>
<section id="submit-feedback">
<h3>Submit Feedback<a class="headerlink" href="#submit-feedback" title="Link to this heading">¶</a></h3>
<p>The best way to send feedback is to file an issue at <a class="reference external" href="https://github.com/DigitalSlideArchive/HistomicsTK/issues">https://github.com/DigitalSlideArchive/HistomicsTK/issues</a>.</p>
<p>If you are proposing a feature:</p>
<ul class="simple">
<li><p>Explain in detail how it would work.</p></li>
<li><p>Keep the scope as narrow as possible, to make it easier to implement.</p></li>
<li><p>Remember that this is a volunteer-driven project, and that contributions
are welcome :)</p></li>
</ul>
</section>
</section>
<section id="get-started">
<h2>Get Started!<a class="headerlink" href="#get-started" title="Link to this heading">¶</a></h2>
<p>Ready to contribute? Here’s how to set up <code class="docutils literal notranslate"><span class="pre">HistomicsTK</span></code> for local development.</p>
<ol class="arabic">
<li><p>Fork the <code class="docutils literal notranslate"><span class="pre">HistomicsTK</span></code> repo on GitHub.</p></li>
<li><p>Clone your fork locally:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>git@github.com:your_name_here/HistomicsTK.git
</pre></div>
</div>
</li>
<li><p>Install your local copy into a virtualenv. Assuming you have virtualenvwrapper installed, this is how you set up your fork for local development:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>mkvirtualenv<span class="w"> </span>HistomicsTK
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>HistomicsTK/
$<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>setuptools-scm<span class="w"> </span>Cython&gt;<span class="o">=</span><span class="m">0</span>.25.2<span class="w"> </span>scikit-build&gt;<span class="o">=</span><span class="m">0</span>.8.1<span class="w"> </span>cmake&gt;<span class="o">=</span><span class="m">0</span>.6.0<span class="w"> </span>numpy&gt;<span class="o">=</span><span class="m">1</span>.12.1
$<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>.
</pre></div>
</div>
</li>
</ol>
<p>Of course, any type of virtual python environment will do. These instructions are equally applicable inside <code class="docutils literal notranslate"><span class="pre">conda</span></code> environments.</p>
<ol class="arabic" start="4">
<li><p>Create a branch for local development:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>name-of-your-bugfix-or-feature
</pre></div>
</div>
<p>Now you can make your changes locally.</p>
</li>
<li><p>Commit your changes and push your branch to GitHub:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>add<span class="w"> </span>.
$<span class="w"> </span>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Your detailed description of your changes.&quot;</span>
$<span class="w"> </span>git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>name-of-your-bugfix-or-feature
</pre></div>
</div>
</li>
</ol>
<ol class="arabic simple" start="7">
<li><p>Submit a pull request through the GitHub website.</p></li>
</ol>
</section>
<section id="pull-request-guidelines">
<h2>Pull Request Guidelines<a class="headerlink" href="#pull-request-guidelines" title="Link to this heading">¶</a></h2>
<p>Before you submit a pull request, check that it meets these guidelines:</p>
<ol class="arabic simple">
<li><p>The pull request should include unit tests (see notes below).</p></li>
<li><p>If the pull request adds functionality, the docs should be updated. Put
your new functionality into a function with a docstring, and make sure
your feature is reflected in one of the <code class="docutils literal notranslate"><span class="pre">.rst</span></code> files under <code class="docutils literal notranslate"><span class="pre">./docs/</span></code>.
If an existing module exists and your feature is appended to it,
then you can ignore this step as Sphinx will render it automatically.
Otherwise, create a new <code class="docutils literal notranslate"><span class="pre">.rst</span></code> file.</p></li>
<li><p><strong>(Optional)</strong> Create a Jupyter Notebook or a detailed documentation
<code class="docutils literal notranslate"><span class="pre">.rst</span></code> under <code class="docutils literal notranslate"><span class="pre">./docs/examples/</span></code> to explain exactly how the feature
should be used.</p></li>
<li><p>The pull request should work for all currently supported Python versions.</p></li>
</ol>
</section>
<section id="unit-testing-notes">
<h2>Unit Testing Notes<a class="headerlink" href="#unit-testing-notes" title="Link to this heading">¶</a></h2>
<p>There are two ‘types’ of unit tests on HistomicsTK.</p>
<ul>
<li><p><strong>Ordinary unit testing:</strong></p>
<p>All unit testing uses the <code class="docutils literal notranslate"><span class="pre">pytest</span></code> module, and you should avoid using python’s
<code class="docutils literal notranslate"><span class="pre">unittest</span></code> module. Unit testing using dependency libraries such as <code class="docutils literal notranslate"><span class="pre">numpy</span></code>
or <code class="docutils literal notranslate"><span class="pre">pandas</span></code> is allowed. Use the standard <code class="docutils literal notranslate"><span class="pre">test_python_file.py</span></code>
naming convention. It is important that you check the
<a class="reference external" href="https://docs.pytest.org/en/latest/goodpractices.html#test-discovery">pytest naming convention</a>
to make sure your discovered and actually run. Most of the unit tests are
going to be stand-alone, and use data files that are small (e.g. csv files)
that are contained (or added to) this repository.</p>
<p>You can run your tests using something like:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>pytest<span class="w"> </span>your_python_file_test.py
</pre></div>
</div>
</li>
<li><p><strong>Server side testing:</strong></p>
<p>Sometimes you need to write unit tests for features that use an authenticated
girder client that is connected to a Digital Slide Archive server. For example,
you may want to test a feature that fetches regions from a slide on the DSA server and
does some analysis with it. In that case, be sure to use the helper methods provided
in <code class="docutils literal notranslate"><span class="pre">./tests/htk_test_utilities.py</span></code>.
The unit tests in <code class="docutils literal notranslate"><span class="pre">./histomicstk/annotations_and_masks/tests/annotations_to_masks_handler_test.py</span></code>
provide an example of how to handle these situations. Note that when access is need to
a very large whole-slide image, <code class="docutils literal notranslate"><span class="pre">GirderClient</span></code> is used to provide access to the
slide and annotations, which are referenced using <code class="docutils literal notranslate"><span class="pre">.sha512</span></code> hash that
is present in <code class="docutils literal notranslate"><span class="pre">./tests/data/</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">pytest</span></code> fixture <code class="docutils literal notranslate"><span class="pre">girderClient</span></code>, defined in <code class="docutils literal notranslate"><span class="pre">tests/htk_test_utilities.py</span></code>
yields an authenticated girder client that points to the server. If a local
girder server docker is running, this will connect to it, otherwise, it will
spin up a local girder server, load it with some initial data, and connect to it.</p>
<blockquote>
<div><p><strong>NOTE:</strong></p>
<p>The default behavior initializes the docker image once per module and
re-uses it for all tests. This means whatever one unit test changes in
the DSA database is persistent for the next unit test. So if, for example,
you remove one annotation as part of the first unit test, the next unit
test will not have access to that annotation. Once all the unit tests are
done, the database is torn down.</p>
<p>If, instead, if you would like to run tests <em>repeatedly</em> (i.e. prototyping),
or you would like the changes written by tests in one module to be
carried over to the next test module, you may prefer to start the server
manually. That way you won’t worry about unknown wait time till the local
server is fully initialized. To manually start a DSA docker image:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>HistomicsTK/tests/
$<span class="w"> </span>docker<span class="w"> </span>compose<span class="w"> </span>up<span class="w"> </span>--build
</pre></div>
</div>
</div></blockquote>
<p>You can run your tests using something like:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>pytest<span class="w"> </span>test_python_file.py
</pre></div>
</div>
<p>Of course, you need to have docker installed and to either
run this as sudo or be added to the docker group by the system admins.</p>
<p>Please contact the owners if you have questions about this or need support on how to
host your test data on <code class="docutils literal notranslate"><span class="pre">data.kitware.com</span></code> to make this work.</p>
</li>
</ul>
</section>
<section id="travis-integration-notes">
<h2>Travis Integration Notes<a class="headerlink" href="#travis-integration-notes" title="Link to this heading">¶</a></h2>
<p>When you submit a pull request to merge your branch with master, it will be
automatically submitted to Travis CI for continuous integration. In plain
English, your new branch will be tested to make sure it complies with the
standardized coding and documentation style of this repo. If you’d like
to help the organizers integrate your changes seamlessly, check to see
if the travis CI was passed. Otherwise, examine for errors and see if you
can get them fixed. Oftentimes, the errors originate from code and docstring
formatting and/or integration of jupyter notebooks into the documentation
examples. Here are some pointers to help you handle some of these issues:</p>
<ul>
<li><p>Consider using <code class="docutils literal notranslate"><span class="pre">flake8</span></code> package to check if you comply with the
formatting standard. HistomicsTK uses PEP8 standard with some options
turned off. The <code class="docutils literal notranslate"><span class="pre">flake8</span></code> parameters we use can be found in:
<a class="reference external" href="https://github.com/girder/girder/blob/2.x-maintenance/setup.cfg">https://github.com/girder/girder/blob/2.x-maintenance/setup.cfg</a></p>
<p>For example:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>flake8<span class="w"> </span>your_python_file.py
</pre></div>
</div>
<p>You can find <code class="docutils literal notranslate"><span class="pre">flake8</span></code> at: <a class="reference external" href="http://flake8.pycqa.org/en/latest/">http://flake8.pycqa.org/en/latest/</a></p>
<p>If you like using Vim editor, there is a tool to integrate <code class="docutils literal notranslate"><span class="pre">flake8</span></code>
with Vim for easy correction of errors at: <a class="reference external" href="https://github.com/nvie/vim-flake8">https://github.com/nvie/vim-flake8</a></p>
</li>
<li><p>If your text editor does not already have this feature, consider using the
package <code class="docutils literal notranslate"><span class="pre">autopep8</span></code> to comply with PEP8 standard: <a class="reference external" href="https://github.com/hhatto/autopep8">https://github.com/hhatto/autopep8</a> .
for example:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>autopep8<span class="w"> </span>--in-place<span class="w"> </span>--aggressive<span class="w"> </span>your_python_file.py
</pre></div>
</div>
</li>
<li><p>Consider using <code class="docutils literal notranslate"><span class="pre">pydocstyle</span></code> to check if you comply with the PEP257
standard for docstrings: <a class="reference external" href="https://github.com/PyCQA/pydocstyle">https://github.com/PyCQA/pydocstyle</a> . For example:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>pydocstyle<span class="w"> </span>your_python_file.py
</pre></div>
</div>
</li>
<li><p>If your text editor does not already do this, consider using <code class="docutils literal notranslate"><span class="pre">docformatter</span></code>
to fix docstrings to standard: <a class="reference external" href="https://pypi.org/project/docformatter/">https://pypi.org/project/docformatter/</a> . For
example:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>docformatter<span class="w"> </span>--in-place<span class="w"> </span>--pre-summary-newline<span class="w"> </span>--blank<span class="w"> </span>your_python_file.py
</pre></div>
</div>
</li>
<li><p>If you added new functionality, consider adding the documentation under
<code class="docutils literal notranslate"><span class="pre">doc</span></code> in the form of rst files. Also consider creating Jupyter
Notebooks to showcase functionality under <code class="docutils literal notranslate"><span class="pre">doc/examples/</span></code>. The documentation
is automatically generated using <code class="docutils literal notranslate"><span class="pre">sphinx</span></code> when you push your pull request and
it gets submitted for travis integration. If you added documentation, consider
checking if <code class="docutils literal notranslate"><span class="pre">sphinx</span></code> throws errors offline. you may install it from:
<a class="reference external" href="https://www.sphinx-doc.org/en/master/index.html">https://www.sphinx-doc.org/en/master/index.html</a>
create a folder for the generated documentation to be saved, let’s say
<code class="docutils literal notranslate"><span class="pre">~/HistomicsTK_test_build/</span></code> . Then you may run something like:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>HistomicsTK
$<span class="w"> </span>sphinx-build<span class="w"> </span>./docs/<span class="w"> </span>~/HistomicsTK_test_build/<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tee<span class="w"> </span>out.log
</pre></div>
</div>
<p>Then you may check the file <code class="docutils literal notranslate"><span class="pre">out.log</span></code> for build errors.</p>
</li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="examples/workflows.html" class="btn btn-neutral float-left" title="Analyzing remotely hosted images with the girder client" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="authors.html" class="btn btn-neutral float-right" title="Credits" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Kitware, Inc..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>